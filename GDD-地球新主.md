# 游戏设计文档 (GDD)
## 地球新主 (Earth Lord)

**版本:** 1.0
**更新日期:** 2025-12-24
**游戏类型:** LBS生存策略游戏
**平台:** iOS 16.0+
**文档状态:** 草案

---

## 目录
1. [游戏概述](#1-游戏概述)
2. [世界观与叙事](#2-世界观与叙事)
3. [核心玩法](#3-核心玩法)
4. [游戏系统](#4-游戏系统)
5. [进阶系统](#5-进阶系统)
6. [经济系统](#6-经济系统)
7. [社交系统](#7-社交系统)
8. [美术设计](#8-美术设计)
9. [音效设计](#9-音效设计)
10. [关卡设计](#10-关卡设计)
11. [平衡性设计](#11-平衡性设计)

---

## 1. 游戏概述

### 1.1 游戏简介
《地球新主》是一款结合真实世界地理位置的末日生存策略游戏。玩家扮演"终末战争"后的幸存者,通过在现实世界中行走来圈占领地、探索废墟、收集资源、建造家园,并与其他开拓者进行交易和社交互动,共同重建文明。

### 1.2 核心体验
- **行走即游戏:** 将现实世界的移动转化为游戏内的核心玩法
- **真实地理融合:** 你所在城市的真实地标成为游戏中的资源点
- **策略与生存:** 资源管理、建造规划、生存压力的多重策略挑战
- **社交与竞争:** 基于位置的社交、交易和竞争系统

### 1.3 目标玩家
- **核心玩家画像:**
  - 年龄: 18-35岁
  - 喜好: 末日题材、生存游戏、策略游戏、LBS游戏
  - 习惯: 每天户外活动30分钟以上
  - 动机: 将运动游戏化、收集养成、社交竞争

- **玩家类型分布:**
  - 成就型玩家(40%): 追求排行榜、成就收集
  - 探索型玩家(30%): 喜欢发现新POI、扩张领地
  - 社交型玩家(20%): 享受交易、聊天、组建联盟
  - 杀手型玩家(10%): 竞争资源、占领最佳地段

### 1.4 游戏特色
1. **Walk to Earn:** 走路获得资源,真正的"运动赚钱"
2. **真实地理:** 基于Apple MapKit的真实POI数据
3. **策略深度:** 资源管理+建造规划+生存压力
4. **社交创新:** 基于位置的交易和通讯系统
5. **公平付费:** 不卖强力道具,付费主要是便利性

---

## 2. 世界观与叙事

### 2.1 世界观设定

#### 时间线
```
2048年 - "终末战争"爆发
│
├─ 全球文明在72小时内崩塌
├─ 核心城市被摧毁
├─ 99%的人口消失
└─ 电力、通讯、交通全面瘫痪

2048-2051 - 黑暗时代
│
├─ 幸存者躲在避难所
├─ 核辐射逐渐消散
├─ 自然开始恢复
└─ 小规模幸存者聚落形成

2051年 - "新开拓者协议"颁布
│
├─ 联合国残余势力发布协议
├─ "凡以双足丈量之无主土地,皆为开拓者所有"
├─ 鼓励幸存者走出避难所
└─ 开始重建文明

2051年至今 - 重建时代(游戏背景)
│
├─ 开拓者用GPS圈占领地
├─ 在废墟中搜刮资源
├─ 建造新的家园
└─ 希望在废土上重新生长
```

#### 世界状态
- **环境:** 城市变成废墟,但自然在复苏(希望朋克美学)
- **科技:** 基础科技保留(GPS、太阳能),高科技稀缺
- **社会:** 旧世界的法律失效,新秩序正在建立
- **资源:** 极度匮乏,所有物资需要搜刮或生产

### 2.2 核心法则

#### 《新开拓者协议》
这是游戏世界的"宪法",所有玩法都围绕它展开:

**第一条: 土地归属**
> "凡以双足丈量之无主土地,皆为开拓者所有。"

- 只有通过真实行走圈占的土地才归属玩家
- 强调"双足"(防止开车作弊)
- "无主土地"(不能和他人重叠)

**第二条: 资源所有**
> "探索者于废墟所得,归其所有;交易自愿,欺诈必究。"

- 搜刮的资源归个人
- 交易基于自愿
- 作弊会被惩罚

**第三条: 活跃保持**
> "领地需持续建设与维护,长期荒废者将被回收。"

- 领地需要定期访问(30天)
- 需要建造和维护建筑
- 鼓励活跃游玩

**第四条: 互助共赢**
> "开拓者应互助合作,独行者难存,联盟者长久。"

- 鼓励交易和社交
- 团队合作获得更多收益

### 2.3 视觉风格

#### 希望朋克 (Hopepunk)
> "在绝望的废土上,希望顽强生长"

**不是传统的末日废土(Wasteland):**
- ❌ 纯粹的绝望、灰暗、死亡
- ❌ 强调暴力和混乱
- ❌ 压抑的情绪

**而是希望朋克(Hopepunk):**
- ✅ 破败中透出新生
- ✅ 废墟上长出绿色植物
- ✅ 温暖的篝火、重建的家园
- ✅ 合作而非对抗

**色彩方案:**
- 主色调: 废土灰(#7A7A7A) + 新生绿(#66CC66)
- 点缀色: 篝火橙(#FF8833) + 天空蓝(#5599FF)
- 警告色: 辐射黄(#FFCC00) + 危险红(#FF3333)

**核心视觉元素:**
- 破败的建筑轮廓
- 绿色植物破土而出
- 温暖的光源(篝火、太阳能灯)
- 锈迹斑斑但依然运转的机械

### 2.4 叙事设计

#### 主线叙事: 重建文明
游戏没有传统的剧情关卡,而是通过**环境叙事**和**系统叙事**传达故事:

**新手阶段: 觉醒 (Day 1-7)**
- 从避难所醒来
- 第一次登记身份
- 第一次圈占领地("这是我的家")
- 第一次探索("废墟中的宝藏")

**成长阶段: 扩张 (Day 8-30)**
- 领地扩大
- 建造更多建筑
- 开始交易("不再孤单")
- 加入频道("找到组织")

**成熟阶段: 影响力 (Day 31+)**
- 多块领地
- 高级建筑
- 排行榜上有名
- 成为区域性"领主"

#### 支线叙事: 收音机广播
定期推送的"官方广播",增加世界观沉浸感:

**示例广播:**
> "各位开拓者注意,这里是新开拓者协议广播站。今天是重建纪元第387天。气象站报告,未来三天天气晴朗,适合探索活动。提醒:保持警惕,废墟中可能有不稳定结构。愿希望与你同在。"

**功能:**
- 传达世界观
- 提示游戏机制
- 预告活动
- 营造氛围

---

## 3. 核心玩法

### 3.1 游戏循环

#### 核心循环 (Core Loop)
```
┌─────────────────────────────────────────┐
│          每日游戏循环                     │
├─────────────────────────────────────────┤
│                                         │
│  1. 查看生存体征                         │
│     ↓                                   │
│  2. 外出探索(Walk to Earn)              │
│     ↓                                   │
│  3. 发现POI → 搜刮资源                  │
│     ↓                                   │
│  4. 返回领地                            │
│     ↓                                   │
│  5. 使用资源(建造/消耗/交易)             │
│     ↓                                   │
│  6. 检查消息、排行榜、成就               │
│     ↓                                   │
│  重复循环                               │
│                                         │
└─────────────────────────────────────────┘
```

#### 扩展循环 (Meta Loop)
```
周循环:
- 周一: 领地扩张日(圈地获得额外奖励)
- 周三: 探索日(POI奖励翻倍)
- 周五: 交易日(交易手续费减免)
- 周末: 建造日(建造时间减半)

月循环:
- 月度排行榜结算
- 月度成就奖励
- 新主题活动开启
- 季节性内容更新
```

### 3.2 核心玩法机制

#### 机制1: GPS圈地

**设计目标:**
- 鼓励户外行走
- 创造独特的"地盘"所有权体验
- 提供策略性选择(圈哪里、圈多大)

**详细流程:**
1. **准备阶段**
   - 玩家在地图上查看周围环境
   - 规划圈地路线(考虑地形、已有领地)

2. **圈地阶段**
   - 点击"开始圈地"
   - GPS开始记录轨迹
   - 地图上显示蓝色轨迹线
   - 实时显示已行走距离、预计面积

3. **闭合阶段**
   - 回到起点50米内
   - 系统提示"检测到轨迹闭合"
   - 自动连接起点和终点
   - 多边形显示

4. **验证阶段**
   系统检查:
   - ✓ 面积是否在1000-50000平方米范围内
   - ✓ 是否与其他玩家领地重叠
   - ✓ GPS点间隔是否正常(防作弊)
   - ✓ 移动速度是否合理(<15km/h)

5. **确认阶段**
   - 验证通过,多边形变绿
   - 弹出"领地确认"界面
   - 输入领地名称
   - 确认后,领地归属玩家

**策略深度:**
- **选址策略:** 选择POI密集的区域,方便后续探索
- **大小权衡:** 太小收益低,太大难圈完
- **地形利用:** 利用河流、公园等自然边界

**防作弊机制:**
- GPS点时间戳验证(防止GPS欺骗)
- 速度检测(防止开车圈地)
- 轨迹连续性检查(防止跳跃)
- 异常行为标记+人工审核

#### 机制2: POI探索

**设计目标:**
- 引导玩家探索现实世界
- 提供"寻宝"的乐趣
- 建立资源获取的主要渠道

**POI类型与资源对应表:**

| POI类型 | 资源类型 | 基础掉落 | 稀有掉落 | 设计逻辑 |
|---------|---------|---------|---------|---------|
| 餐厅、超市、便利店 | 食物、水 | 罐头×10-20<br/>水×10-20 | 高级食品×2-5 | 合理:这些地方本来就有食物 |
| 医院、药店、诊所 | 药品 | 急救包×5-10<br/>绷带×10-15 | 抗生素×2-5 | 合理:医疗场所有药品 |
| 工厂、工地、仓库 | 金属、工具 | 金属×15-30<br/>螺丝×20-40 | 高级工具×1-3 | 合理:工业场所有材料 |
| 公园、林地、绿地 | 木材、植物 | 木材×20-40<br/>植物纤维×15-30 | 草药×5-10 | 合理:自然场所有自然资源 |
| 银行、珠宝店、保险库 | 稀有材料 | 电路板×3-8<br/>精密零件×2-5 | 卫星模块×1-2 | 合理:高价值场所有高科技 |
| 加油站、充电站 | 能源 | 燃料×10-20<br/>电池×5-10 | 太阳能板×1-2 | 合理:能源场所有能源 |
| 图书馆、学校、书店 | 知识、图纸 | 书籍×5-10<br/>纸张×10-20 | 建筑图纸×1 | 合理:知识场所有文献 |

**奖励计算公式:**
```
基础奖励 = POI类型基础值
距离加成 = min(行走距离/100米, 50%)
时长加成 = min(探索时长/10分钟, 30%)
随机浮动 = ±20%
VIP加成 = 订阅用户+50%

最终奖励 = 基础奖励 × (1 + 距离加成 + 时长加成) × 随机浮动 × VIP加成
```

**示例:**
玩家探索一个超市:
- 基础奖励: 罐头×15, 水×15
- 行走了800米: +40%
- 探索了25分钟: +30%
- 随机浮动: +15%
- 有VIP: +50%
- 最终: 罐头×15×(1+0.4+0.3)×1.15×1.5 = 罐头×44, 水×44

**冷却机制:**
- 每个POI每24小时只能搜刮一次
- 鼓励玩家探索更多不同的POI
- 防止刷同一个点

**稀有POI:**
某些特殊地点有更高价值:
- 市政厅、博物馆: 2倍奖励
- 机场、火车站: 稀有度+1
- 地标建筑(如东方明珠): 3倍奖励+特殊成就

#### 机制3: 资源管理

**设计目标:**
- 提供策略深度
- 创造取舍感
- 驱动交易系统

**资源分类系统:**

**Tier 1: 基础资源(Common)**
- 获取: 常见POI
- 用途: 建造基础建筑、生存消耗
- 存储: 占用背包1格/个
- 示例: 木材、石头、食物、水

**Tier 2: 进阶资源(Uncommon)**
- 获取: 特定POI、基础资源合成
- 用途: 建造中级建筑、工具制作
- 存储: 占用背包1格/个
- 示例: 金属、布料、药品、燃料

**Tier 3: 稀有资源(Rare)**
- 获取: 稀有POI、交易、建筑生产
- 用途: 建造高级建筑、设备升级
- 存储: 占用背包2格/个
- 示例: 电路板、精密零件、高级药品

**Tier 4: 传说资源(Legendary)**
- 获取: 极稀有POI、玩家交易、特殊事件
- 用途: 顶级建筑、设备
- 存储: 占用背包5格/个
- 示例: 卫星模块、核心处理器、稀有晶体

**资源流动设计:**
```
获取途径:
POI搜刮(70%) → 建筑生产(20%) → 交易(10%)

消耗途径:
建造(40%) → 生存消耗(30%) → 交易(20%) → 制作(10%)

平衡目标:
保持玩家始终处于"略微缺资源"的状态,
既不让玩家太富裕(失去动力),
也不让玩家太贫困(产生挫败感)
```

**背包管理策略:**
- 初始容量: 100格
- 扩容方式: 建造仓库(+20/+50/+100格)
- 策略选择:
  - 专精型: 只收集某几种资源,深度发展
  - 平衡型: 各种资源都收集,全面发展
  - 交易型: 收集热门交易资源,通过交易获利

#### 机制4: 建造系统

**设计目标:**
- 提供长期目标
- 可视化玩家成就
- 创造资源消耗出口

**建筑功能分类:**

**生存类建筑**
目标: 满足基本生存需求

| 建筑 | 成本 | 功能 | 解锁等级 |
|------|------|------|----------|
| 篝火 | 石头×20, 木材×30 | 提供温暖,提升心情+5% | 1级 |
| 简易庇护所 | 木材×50, 布料×10 | 休息点,恢复生命+5/小时 | 1级 |
| 高级庇护所 | 木材×100, 石头×80, 金属×30 | 休息点,恢复生命+10/小时 | 5级 |
| 卫生站 | 金属×80, 药品×50 | 治疗,恢复生命+30(即时) | 8级 |

**储存类建筑**
目标: 扩大背包容量

| 建筑 | 成本 | 功能 | 解锁等级 |
|------|------|------|----------|
| 小型仓库 | 木材×40, 石头×20 | 背包+20格 | 2级 |
| 中型仓库 | 木材×80, 石头×60, 金属×20 | 背包+50格 | 6级 |
| 大型仓库 | 木材×150, 石头×120, 金属×80 | 背包+100格 | 12级 |
| 冷藏库 | 金属×200, 电路板×30 | 背包+80格,食物不腐烂 | 15级 |

**生产类建筑**
目标: 产出资源,减少对探索的依赖

| 建筑 | 成本 | 功能 | 产出 | 解锁等级 |
|------|------|------|------|----------|
| 小农田 | 木材×50, 肥料×20 | 生产食物 | 罐头×10/24h | 3级 |
| 大农田 | 木材×100, 肥料×50, 水×50 | 生产食物 | 罐头×30/24h | 7级 |
| 雨水收集器 | 塑料×30, 金属×20 | 收集水 | 水×20/24h | 4级 |
| 工作台 | 木材×60, 金属×30 | 制作工具 | 按需生产 | 5级 |
| 化学实验室 | 金属×150, 电路板×50 | 制作药品 | 按需生产 | 10级 |

**能源类建筑**
目标: 提供电力,驱动高级建筑

| 建筑 | 成本 | 功能 | 产出 | 解锁等级 |
|------|------|------|------|----------|
| 太阳能板 | 金属×100, 电路板×50 | 发电 | 电力×50/24h | 8级 |
| 风力发电机 | 金属×150, 电路板×80 | 发电 | 电力×100/24h | 11级 |
| 柴油发电机 | 金属×120, 燃料×100 | 发电 | 电力×80/24h(需燃料) | 9级 |

**防御类建筑**(未来扩展)
| 建筑 | 成本 | 功能 | 解锁等级 |
|------|------|------|----------|
| 木栅栏 | 木材×80 | 防御+10 | 6级 |
| 石墙 | 石头×150 | 防御+30 | 10级 |
| 哨塔 | 木材×100, 石头×80 | 预警系统 | 12级 |

**建筑状态机:**
```
[选择建筑] → [验证资源] → [选择位置] → [扣除资源]
                                              ↓
                                         [建造中]
                                              ↓
                                    (等待建造时间)
                                              ↓
                                         [待激活]
                                              ↓
                                      [玩家激活]
                                              ↓
                                         [运行中]
                                         ↙      ↘
                                  [正常工作]  [需要维护]
                                         ↓          ↓
                                     [产出资源]  [损坏]
                                                    ↓
                                                [维修]
                                                    ↓
                                               [运行中]

可选操作:
[运行中] → [升级] → [升级中] → [运行中]
[运行中] → [拆除] → [回收50%资源] → [移除]
```

**建造策略:**
新手推荐路径:
1. 篝火(Day 1) → 基础生存
2. 小型仓库(Day 2) → 扩容
3. 简易庇护所(Day 3) → 生命恢复
4. 小农田(Day 5) → 资源自给
5. 雨水收集器(Day 7) → 水资源
6. 太阳能板(Day 14) → 进入能源时代

高级玩家路径:
- 多个大型仓库 → 囤积资源
- 生产链建筑 → 资源自给自足
- 高级能源 → 支撑生产链

#### 机制5: 生存体征

**设计目标:**
- 增加紧迫感
- 创造资源消耗循环
- 提供付费点(减缓衰减)

**体征系统:**

**核心生命 (0-100)**
- 初始值: 100
- 衰减: 仅当饱食度或水分过低时才衰减
- 归零: 角色死亡

**饱食度 (0-100%)**
- 初始值: 100%
- 自然衰减: -5%/小时
- 探索加速衰减: 行走每1公里额外-2%
- 恢复:
  - 罐头食品: +30%
  - 高级食品: +50%
  - 新鲜食物: +60%

**水分 (0-100%)**
- 初始值: 100%
- 自然衰减: -8%/小时
- 探索加速衰减: 行走每1公里额外-3%
- 恢复:
  - 饮用水: +40%
  - 净化水: +60%

**状态加成系统:**
```
理想状态(饱食度≥80%, 水分≥80%):
- 探索奖励 +20%
- 建造速度 +20%
- 移动速度显示更流畅(视觉效果)

良好状态(饱食度≥50%, 水分≥50%):
- 无加成,正常游玩

警告状态(饱食度<50% 或 水分<50%):
- 屏幕边缘泛黄(饥饿)或泛蓝(口渴)
- 核心生命开始衰减: -2/小时(饥饿) -3/小时(口渴)

危险状态(饱食度<20% 或 水分<20%):
- 屏幕效果加重
- 核心生命快速衰减: -5/小时(饥饿) -8/小时(口渴)
- 无法建造

濒死状态(核心生命<20):
- 屏幕边缘泛红
- 无法圈地、建造
- 移动速度-50%
```

**死亡机制:**
当核心生命归零:
1. 死亡动画(屏幕变暗)
2. 结算界面:
   - 存活天数
   - 损失物品列表(随机50%)
   - 重生选项
3. 重生:
   - 位置: 最近的领地
   - 状态: 核心生命50%, 饱食度50%, 水分50%
   - 保护期: 24小时内体征不再衰减
4. 惩罚:
   - 损失背包中50%的物品(随机)
   - 成就"不屈者"进度+1

**离线计算:**
玩家离线期间,体征仍会衰减:
```
离线时长 = 当前时间 - 上次登出时间
应衰减饱食度 = 离线时长(小时) × 5%
应衰减水分 = 离线时长(小时) × 8%

保护机制:
如果计算后会导致死亡,则:
- 核心生命保留1点
- 饱食度和水分归零
- 提示"你差点死掉,快补充资源!"
```

**策略深度:**
- 短期外出: 不用担心,体征足够
- 长期探索: 需要携带食物和水
- 过夜离线: 上线需立即补充
- 建造生产: 农田和水收集器提供被动恢复

---

## 4. 游戏系统

### 4.1 经济系统

#### 货币设计

**金币 (Coins)**
- 获取方式:
  - 成就奖励(主要)
  - 每日登录(50金币)
  - 完成任务
  - 升级奖励
- 用途:
  - 加速建造(1小时=100金币)
  - 购买背包扩容(临时,1天=200金币)
  - 购买特殊图纸
- 特点: 不可交易,免费获得

**资源 (Resources)**
- 获取方式: 探索、生产、交易
- 用途: 建造、消耗、交易
- 特点: 可交易,游戏内核心货币

**钻石 (Diamonds)** - 未来扩展
- 获取方式: 付费购买、稀有成就
- 用途: 购买稀有物品、皮肤、特权
- 特点: 硬通货

#### 交易系统详细设计

**交易机制:**
```
挂单流程:
1. 玩家A在自己的领地发布交易
   - 我提供: 罐头×50
   - 我需要: 药品×10
2. 挂单保存到数据库,状态="挂单中"
3. 扣除玩家A的罐头×50(托管)

发现流程:
1. 玩家B在地图上移动
2. 进入玩家A领地100米范围内
3. 系统推送"发现附近交易"
4. 玩家B打开交易列表,看到玩家A的挂单

交易流程:
1. 玩家B点击"接受交易"
2. 系统验证玩家B是否有药品×10
3. 验证通过,开始交易:
   a. 扣除玩家B的药品×10
   b. 给玩家B增加罐头×50
   c. 给玩家A增加药品×10
   d. 更新挂单状态="已完成"
4. 双方收到交易成功通知

原子性保证:
使用数据库事务,要么全部成功,要么全部失败
```

**交易费用:**
- 免费用户: 每笔交易收取10%手续费(自动扣除)
- VIP用户: 免手续费

**交易限制:**
- 每个玩家同时最多挂单10个
- 每笔交易最多50种物品
- 防止恶意交易(如1木材换1000金属):
  - 系统计算"公允价值"
  - 偏离>300%时弹出警告
  - 需要双方确认

**热门交易榜:**
展示最近24小时内:
- 交易次数最多的物品
- 平均交易比率
- 帮助玩家定价

#### 资源流动监控

设计目标: 确保经济健康,防止通胀/通缩

**监控指标:**
```
每日产出:
- 各类资源通过POI搜刮的总量
- 各类资源通过建筑生产的总量

每日消耗:
- 各类资源通过建造的消耗
- 各类资源通过生存消耗
- 各类资源通过交易手续费消耗

平衡目标:
产出 ≈ 消耗 × 1.1 (略微通胀,鼓励消费)
```

**动态调整:**
如果某资源严重失衡:
- 通胀(产出>>消耗): 降低POI掉落,增加建造成本
- 通缩(产出<<消耗): 提高POI掉落,降低建造成本

### 4.2 社交系统

#### 通讯系统

**设备等级系统:**

| 设备 | 接收范围 | 发送范围 | 解锁条件 | 升级成本 |
|------|---------|---------|---------|---------|
| 收音机 | 全球 | 无(只能收听) | 初始拥有 | - |
| 对讲机 | 3公里 | 3公里 | 等级5 | 金属×100, 电路板×20 |
| 营地电台 | 10公里 | 10公里 | 等级10 | 金属×300, 电路板×80, 卫星模块×5 |
| 卫星通讯 | 全球 | 全球 | 等级20 | 金属×1000, 电路板×300, 卫星模块×50 |

**公共频道设计:**
- 覆盖范围: 根据设备等级
- 消息显示:
  - 昵称
  - 距离(如"1.2km")
  - 消息内容
  - 时间戳
- 防刷屏:
  - 10秒/条限制
  - 连续3条相同内容=禁言1小时
- 敏感词过滤

**频道系统:**
类似Discord的服务器:
- 创建频道: 消耗500金币
- 频道类型:
  - 公开频道: 任何人可加入
  - 私密频道: 需要审批
- 频道管理:
  - 管理员可踢人
  - 管理员可禁言
  - 管理员可设置频道公告
- 频道列表:
  - 按距离排序(附近的频道)
  - 按成员数排序(热门频道)
  - 搜索功能

**PTT呼叫:**
- 设计灵感: 真实的对讲机
- 操作: 长按发送,松开结束
- 语音录制: 最长60秒
- 播放: 自动播放,队列播放
- 覆盖范围: 根据设备等级
- 沉浸感: 对讲机"滋滋"声效

#### 排行榜系统

**榜单类型:**

**领地面积榜**
- 排序: 所有领地总面积
- 更新: 每5分钟
- 奖励:
  - 第1名: 称号"地产大亨" + 5000金币/月
  - 前10名: 3000金币/月
  - 前100名: 1000金币/月

**探索废墟榜**
- 排序: 累计搜刮POI次数
- 更新: 每5分钟
- 奖励:
  - 第1名: 称号"废土行者" + 5000金币/月
  - 前10名: 3000金币/月
  - 前100名: 1000金币/月

**建筑数量榜**
- 排序: 拥有建筑总数
- 更新: 每5分钟
- 奖励:
  - 第1名: 称号"建造大师" + 5000金币/月
  - 前10名: 3000金币/月
  - 前100名: 1000金币/月

**榜单功能:**
- 点击玩家查看公开档案
- 自己的排名高亮
- 附近玩家标识
- 分享排名到社交媒体

**技术优化:**
- 使用数据库窗口函数RANK()
- Redis缓存5分钟
- 分页加载(每页50条)

#### 成就系统

**成就分类:**

**探索类成就**
| 成就名称 | 条件 | 奖励 | 稀有度 |
|---------|------|------|--------|
| 初次探索 | 搜刮1个POI | 100金币 | 普通 |
| 探索者 | 搜刮10个POI | 200金币 | 普通 |
| 探索先锋 | 搜刮100个POI | 1000金币 | 稀有 |
| 废土行者 | 探索距离100公里 | 5000金币 + 称号 | 史诗 |
| 全图探索者 | 搜刮所有类型POI各10个 | 10000金币 | 传说 |

**建造类成就**
| 成就名称 | 条件 | 奖励 | 稀有度 |
|---------|------|------|--------|
| 初次建造 | 建造1个建筑 | 150金币 | 普通 |
| 建造者 | 建造10个建筑 | 500金币 | 普通 |
| 建造大师 | 建造50个建筑 | 2000金币 | 稀有 |
| 城市规划师 | 拥有所有类型建筑各1个 | 5000金币 | 史诗 |
| 文明重建者 | 建造100个建筑 | 10000金币 + 称号 | 传说 |

**社交类成就**
| 成就名称 | 条件 | 奖励 | 稀有度 |
|---------|------|------|--------|
| 初次交易 | 完成1笔交易 | 200金币 | 普通 |
| 交易达人 | 完成50笔交易 | 1000金币 | 稀有 |
| 商业大亨 | 完成500笔交易 | 5000金币 | 史诗 |
| 社交名流 | 加入10个频道 | 800金币 | 稀有 |
| 呼叫者 | 发送100次PTT呼叫 | 500金币 | 普通 |

**生存类成就**
| 成就名称 | 条件 | 奖励 | 稀有度 |
|---------|------|------|--------|
| 存活者 | 存活7天 | 300金币 | 普通 |
| 幸存者 | 存活30天 | 1000金币 | 稀有 |
| 不屈者 | 死亡后重生(可重复) | 100金币 | 普通 |
| 铁人 | 存活100天且从未死亡 | 10000金币 + 称号 | 传说 |

**特殊成就**
| 成就名称 | 条件 | 奖励 | 稀有度 |
|---------|------|------|--------|
| 早鸟 | 凌晨4-6点登录 | 200金币 | 普通 |
| 夜猫子 | 晚上22-24点登录 | 200金币 | 普通 |
| 马拉松 | 单日行走20公里 | 1000金币 | 稀有 |
| 全勤 | 连续登录30天 | 2000金币 | 稀有 |
| 财富自由 | 拥有10000个任意资源 | 3000金币 | 史诗 |

**成就系统架构:**
使用EventBus(发布-订阅模式):
```swift
// 玩家完成圈地
EventBus.post(.territoryCreated)

// 成就系统监听
EventBus.on(.territoryCreated) {
    if 是第一次圈地 {
        解锁成就("新手领主")
        发放奖励(100金币)
    }
}
```

好处:
- 解耦: 圈地系统不需要知道成就系统
- 易扩展: 添加新成就只需要订阅对应事件
- 性能好: 事件驱动,只在需要时检查

### 4.3 进阶系统

#### 等级系统

**经验值获取:**
| 行为 | 经验值 |
|------|--------|
| 圈地1000平方米 | 10经验 |
| 搜刮1个POI | 5经验 |
| 建造1个建筑 | 20经验 |
| 完成1笔交易 | 10经验 |
| 发送10条消息 | 5经验 |
| 存活1天 | 50经验 |

**升级曲线:**
```
等级1→2: 100经验
等级2→3: 200经验
等级3→4: 400经验
...
等级N→N+1: 100 × 2^(N-1) 经验

总经验需求(到N级): Σ(100×2^(i-1)), i=1到N
```

**等级奖励:**
| 等级 | 奖励 | 解锁内容 |
|------|------|---------|
| 2 | 200金币 | 小型仓库 |
| 5 | 500金币, 对讲机 | 公共频道发送 |
| 10 | 1000金币 | 营地电台, 高级建筑 |
| 15 | 2000金币 | 传说建筑 |
| 20 | 5000金币, 卫星通讯 | 全球通讯 |

#### 称号系统

**称号获取:**
- 排行榜第1名
- 特殊成就
- 活动奖励

**称号展示:**
- 在个人资料中显示
- 在聊天中显示在昵称前
- 在排行榜中特殊标识

**示例称号:**
- "地产大亨": 领地面积榜第1名
- "废土行者": 探索距离100公里
- "建造大师": 建筑数量榜第1名
- "铁人": 存活100天从未死亡
- "开拓先锋": 首批100名玩家
- "慷慨者": 累计交易给其他玩家价值超过10000资源

---

## 5. 经济系统

### 5.1 资源产出

**日均产出预估(单个玩家):**
假设玩家每天探索3个POI:
- 食物: 60个
- 水: 60个
- 木材: 80个
- 石头: 60个
- 金属: 40个
- 药品: 20个
- 稀有资源: 5个

**建筑生产补充:**
拥有小农田+雨水收集器:
- 食物: +10个/天
- 水: +20个/天

**总产出:**
- 食物: 70个/天
- 水: 80个/天
- 其他: 如上

### 5.2 资源消耗

**日均消耗(单个玩家):**
- 生存消耗:
  - 食物: 5%×24小时 = 120% → 需要4次补充 → 约40个/天
  - 水: 8%×24小时 = 192% → 需要5次补充 → 约50个/天
- 建造消耗(平均):
  - 每周建造1-2个建筑
  - 日均: 木材30, 石头20, 金属10

**总消耗:**
- 食物: 40个/天
- 水: 50个/天
- 木材: 30个/天
- 石头: 20个/天
- 金属: 10个/天

### 5.3 经济平衡

**设计目标:**
- 产出略大于消耗(+10-20%)
- 让玩家有余力参与交易
- 但不至于资源泛滥

**当前平衡:**
- 食物: 70产出 vs 40消耗 = 75%富余 ✅
- 水: 80产出 vs 50消耗 = 60%富余 ✅
- 木材: 80产出 vs 30消耗 = 166%富余 → 可能需要增加消耗
- 金属: 40产出 vs 10消耗 = 300%富余 → 需要更多建筑消耗

**调整方案:**
- 增加高级建筑对金属的需求
- 建筑维护需要消耗资源
- 交易手续费也扣除实物资源

---

## 6. 美术设计

### 6.1 视觉风格: 希望朋克

**核心理念:**
> "在废墟之上,希望生长"

**色彩系统:**

**主色调:**
- 废土灰(#7A7A7A): 背景、建筑
- 新生绿(#66CC66): 植物、圈地成功、正面反馈
- 天空蓝(#5599FF): 水、科技元素

**辅助色:**
- 篝火橙(#FF8833): 温暖、能源、建筑
- 锈迹棕(#8B4513): 金属、工业
- 尘土黄(#D4A76A): 沙漠、废墟

**功能色:**
- 成功绿(#4CAF50)
- 警告黄(#FFC107)
- 危险红(#F44336)
- 信息蓝(#2196F3)

**材质风格:**
- 粗糙: 混凝土纹理、锈蚀金属
- 对比: 破败中的崭新科技(GPS设备、太阳能板)
- 有机: 植物、木材的自然纹理

### 6.2 UI设计

**设计原则:**
1. 大按钮(适合户外操作)
2. 高对比度(阳光下可读)
3. 扁平化(清晰简洁)
4. 即时反馈(所有操作有视觉响应)

**主界面布局:**
```
┌─────────────────────────────────────┐
│  顶部状态栏                          │
│  [生命:69] [饱食:68%] [水分:70%]     │
├─────────────────────────────────────┤
│                                     │
│                                     │
│         地图视图                     │
│      (占据大部分屏幕)                │
│                                     │
│                                     │
├─────────────────────────────────────┤
│  底部导航栏                          │
│  [地图] [背包] [通讯] [个人]         │
└─────────────────────────────────────┘
```

**关键界面设计:**

**圈地界面:**
- 中央: 地图(卫星视图+轨迹)
- 底部: 大按钮"开始圈地" / "完成圈地"
- 顶部: 当前距离、预计面积

**探索界面:**
- 地图中心: 玩家位置(蓝色脉冲圆)
- POI标记: 不同颜色的图钉
  - 绿色: 可搜刮
  - 灰色: 冷却中(显示倒计时)
  - 金色: 稀有POI
- 发现弹窗: 卡片式设计,显示POI信息

**建造界面:**
- 左侧: 建筑分类菜单(tab)
- 中间: 建筑卡片网格
  - 建筑图标
  - 建筑名称
  - 所需资源
  - 锁定/解锁状态
- 点击后: 详情弹窗
  - 3D预览(未来)
  - 详细属性
  - "开始建造"按钮

**背包界面:**
- 顶部: 容量条(41/100)
- 标签页: 全部、食物、药品、材料、稀有
- 网格布局:
  - 物品图标
  - 物品名称
  - 数量
- 长按: 弹出操作菜单(使用、丢弃、交易)

### 6.3 图标设计

**资源图标风格:**
- 手绘扁平风
- 轮廓清晰
- 易识别

**示例:**
- 罐头: 金属罐头图标,略有凹痕(末日感)
- 水: 水瓶,半透明蓝色
- 木材: 捆绑的木头,有纹理
- 金属: 生锈的金属板
- 电路板: 绿色电路板,有电子元件

**建筑图标:**
- 等轴视图(伪3D)
- 展示建筑特征
- 带阴影

### 6.4 动效设计

**圈地动效:**
- GPS轨迹: 蓝色线条,带流光效果
- 闭合瞬间: 线条变绿,内部渐变填充
- 成功: 绿色粒子爆发

**探索动效:**
- 接近POI: POI图标跳动
- 搜刮中: 加载动画(2-3秒)
- 获得物品: 物品图标从底部飞入背包,带轨迹

**建造动效:**
- 放置建筑: 建筑从透明到实体,带缩放
- 建造中: 建筑半透明,有施工粒子效果
- 完成: 金色闪光

**UI动效:**
- 按钮点击: 缩放+轻微震动
- 页面切换: 侧滑+淡入淡出
- 提示弹窗: 从顶部滑下 / 从底部弹起

---

## 7. 音效设计

### 7.1 环境音效

**地图场景:**
- 白天: 风声、远处鸟鸣、偶尔的金属碰撞
- 夜晚: 虫鸣、风声、更多静谧感
- 雨天: 雨声、雷声(远处)

**领地场景:**
- 篝火: 木柴燃烧的噼啪声
- 发电机: 低频嗡鸣
- 农田: 轻微的风吹植物声

### 7.2 交互音效

**UI交互:**
- 按钮点击: 轻脆的"滴"声
- 页面切换: 轻微的"嗖"声
- 错误提示: 低沉的"咚"声
- 成功操作: 明亮的"叮"声

**游戏行为:**
- 圈地开始: GPS启动声(滴滴滴)
- 圈地闭合: 锁定声 + 成功音效
- POI发现: 雷达扫描声"滴~"
- 搜刮中: 翻找声、金属碰撞
- 获得物品: "叮叮叮"(根据数量)

**建造:**
- 放置建筑: "咚"的一声
- 建造中: 锤子敲击、电钻声
- 建造完成: 完成音效 + 短音乐

**通讯:**
- 收到消息: 提示音"叮"
- PTT按下: 对讲机"滋~"声
- PTT松开: "咔"的一声
- 语音播放: 对讲机音质(略失真)

### 7.3 音乐设计

**主题音乐:**
- 风格: 后摇滚 + 环境音乐
- 情绪: 忧郁但有希望
- 乐器: 吉他、钢琴、合成器
- 参考: 《最后生还者》配乐

**不同场景音乐:**
- 探索: 轻柔、神秘
- 建造: 节奏感、正能量
- 战斗(未来): 紧张、快节奏
- 成就解锁: 短促的胜利音乐

**音量控制:**
- 环境音: 可单独调节
- 音效: 可单独调节
- 音乐: 可单独调节
- 主音量: 总控制

---

## 8. 关卡设计

### 8.1 新手引导

**目标:**
- 3分钟内让玩家体验核心玩法
- 通过实际操作学习,而非文字教程

**引导流程:**

**第一步: 创建角色(30秒)**
- 登录/注册
- 简单的角色自定义(昵称)
- 跳过冗长的CG

**第二步: 第一次圈地(2分钟)**
```
系统提示:
"欢迎来到新世界,开拓者。
根据《新开拓者协议》,你可以通过行走圈占土地。
让我们试试看!"

[引导箭头指向"开始圈地"按钮]

玩家点击后:
"很好!现在向前走动,画出你的领地边界。
走个小圈就行,不用太远。"

[玩家行走,轨迹绘制]

当轨迹接近闭合:
"回到起点!再走几步..."

[自动闭合]

"太棒了!这块地现在属于你了。
点击确认,给它起个名字吧。"

[领地确认界面]

成功后:
"恭喜,你现在是一名真正的开拓者了!
接下来,让我们找点物资。"
```

**第三步: 第一次探索(3分钟)**
```
系统提示:
"看到地图上那个绿色图钉了吗?
那是一个可以搜刮的地点。
走过去试试!"

[引导箭头指向最近的POI]

玩家接近POI:
[自动触发发现弹窗]

"你发现了一个废弃超市!
点击'搜刮'看看能找到什么。"

[搜刮动画]

"太好了!你找到了一些物资。
这些东西存在你的背包里,可以用来建造或交易。"
```

**第四步: 第一次建造(2分钟)**
```
系统提示:
"有了资源,你可以在领地上建造建筑。
让我们建一个篝火取暖吧。"

[引导进入建造界面]

"选择'篝火',然后在地图上选个位置。"

[玩家放置建筑]

"完成!篝火会让你的领地更温暖。
多建造不同的建筑,解锁更多能力。"
```

**第五步: 自由探索**
```
系统提示:
"基础教程完成!接下来由你自己探索。

记住:
• 探索废墟获取资源
• 建造建筑发展领地
• 和其他开拓者交易
• 完成成就获得奖励

在这个新世界,你的双脚就是最大的资产。
加油,开拓者!"
```

### 8.2 进阶教程

**条件触发式教程:**
当玩家第一次执行某个行为时,触发对应教程

**示例:**
- 第一次背包满: 提示建造仓库
- 第一次进入其他玩家领地: 提示交易系统
- 第一次打开通讯: 提示公共频道
- 第一次体征低于50%: 提示生存机制

### 8.3 每日任务设计

**目标:**
- 引导玩家体验不同玩法
- 提供每日目标感
- 奖励活跃玩家

**每日任务列表:**
| 任务 | 奖励 | 设计意图 |
|------|------|---------|
| 登录游戏 | 50金币 | 基础留存 |
| 探索1个POI | 100金币 | 引导探索 |
| 行走1公里 | 100金币 | 鼓励运动 |
| 使用1个食物/水 | 50金币 | 体验生存系统 |
| 发送5条消息 | 80金币 | 促进社交 |
| 完成1笔交易 | 150金币 | 激活交易系统 |
| 建造或升级1个建筑 | 200金币 | 推动建造 |

**周任务:**
| 任务 | 奖励 | 设计意图 |
|------|------|---------|
| 圈地1次 | 500金币 | 扩张领地 |
| 探索20个POI | 800金币 | 深度探索 |
| 行走10公里 | 1000金币 | 重度运动 |
| 完成10笔交易 | 1200金币 | 交易活跃 |
| 建造5个建筑 | 1500金币 | 建造推进 |

---

## 9. 平衡性设计

### 9.1 核心平衡目标

1. **资源平衡:** 产出略大于消耗(+10-20%)
2. **时间平衡:** 每日30-60分钟可完成所有日常
3. **付费平衡:** 付费带来便利,不带来压倒性优势
4. **社交平衡:** 独行可玩,组队更优
5. **竞争平衡:** 排行榜有差距,但新人也有机会

### 9.2 数值平衡表

**资源获取与消耗平衡:**

| 资源类型 | 日均获取 | 日均消耗 | 富余率 | 平衡性 |
|---------|---------|---------|--------|--------|
| 食物 | 70 | 40 | 75% | ✅ 良好 |
| 水 | 80 | 50 | 60% | ✅ 良好 |
| 木材 | 80 | 30 | 166% | ⚠️ 可能过剩 |
| 石头 | 60 | 20 | 200% | ⚠️ 可能过剩 |
| 金属 | 40 | 10 | 300% | ❌ 需要增加消耗 |
| 药品 | 20 | 5 | 300% | ❌ 需要增加消耗 |

**调整方案:**
- 增加高级建筑对金属的需求
- 建筑维护系统(消耗资源)
- 更多药品用途(如增益道具)

**时间投入与收益平衡:**

| 日活跃时长 | 可完成内容 | 收益 | 设计目标 |
|-----------|-----------|------|---------|
| 10分钟 | 每日登录、1次探索 | 小 | 保底体验,留住碎片时间玩家 |
| 30分钟 | 日常任务全完成 | 中 | 核心目标,大部分玩家 |
| 60分钟 | 日常+额外探索+建造 | 大 | 奖励重度玩家 |
| 120分钟+ | 周任务、排行榜冲刺 | 很大 | 核心玩家 |

### 9.3 付费平衡

**设计原则:**
- Pay for Convenience(付费买便利), not Pay to Win(付费赢)
- 免费玩家可以获得所有内容,只是更慢
- 付费玩家节省时间,但不能直接碾压

**免费 vs 付费对比:**

| 维度 | 免费玩家 | 月卡($9.99) | 领主通行证($19.99) |
|------|---------|------------|-------------------|
| 探索范围 | 标准 | +50% | +100% |
| 建造时间 | 标准 | 标准 | 立即完成 |
| 交易手续费 | 10% | 0% | 0% |
| 每日资源包 | 无 | 小礼包 | 大礼包 |
| 背包扩容 | 通过建造 | 通过建造 | 额外+50格 |
| 经验加成 | 标准 | +20% | +50% |
| 能否获得所有内容 | ✅ 是 | ✅ 是 | ✅ 是 |

**关键:**
- 免费玩家玩30天能达到的进度,付费玩家可能20天达到
- 但付费玩家不能在1天内碾压免费玩家30天的积累

### 9.4 PvP平衡(未来扩展)

目前游戏主要是PvE+社交,未来如果加入PvP(如领地争夺):

**平衡原则:**
- 防御方优势: 在自己领地内+30%属性
- 等级匹配: 只能攻击等级差距±5的玩家
- CD限制: 同一领地24小时内只能被攻击一次
- 损失有限: 战败最多损失背包10%资源,不损失建筑

---

## 10. 技术设计

### 10.1 技术架构

```
┌─────────────────────────────────────┐
│          客户端 (iOS)                │
│  SwiftUI + MapKit + StoreKit 2      │
│  SwiftData (本地存储)                │
└─────────────┬───────────────────────┘
              │
              │ HTTPS/WebSocket
              ↓
┌─────────────────────────────────────┐
│          后端 (Supabase)             │
│  PostgreSQL + PostGIS               │
│  Realtime (消息推送)                 │
│  Auth (用户认证)                     │
│  Storage (文件存储)                  │
└─────────────────────────────────────┘
```

### 10.2 核心技术点

**GPS与地理:**
- Apple MapKit: 地图渲染、POI查询
- Core Location: GPS定位、地理围栏
- PostGIS: 地理空间查询(重叠检测、距离计算)

**数据同步:**
- 本地优先架构: 先写本地,后台同步
- Supabase Realtime: WebSocket实时推送
- 冲突解决: 服务端为准

**性能优化:**
- 地图瓦片缓存
- 数据库查询优化(索引、分页)
- 图片懒加载
- 列表虚拟滚动

### 10.3 安全设计

**防作弊:**
- GPS轨迹验证(速度、时间戳)
- 服务端验证所有关键操作
- 异常行为监控
- 人工审核机制

**数据安全:**
- HTTPS加密传输
- Token安全存储(Keychain)
- 敏感操作二次确认
- 符合GDPR/CCPA

---

## 11. 运营计划

### 11.1 上线计划

**Alpha测试(内部):**
- 时长: 2周
- 人数: 10人
- 目标: 发现重大bug,验证核心玩法

**Beta测试(小范围):**
- 时长: 4周
- 人数: 100人
- 目标: 平衡性调整,服务器压测

**正式上线:**
- 平台: App Store(全球)
- 首发地区: 美国、加拿大、英国、澳大利亚
- 后续扩展: 欧洲、亚洲

### 11.2 运营活动

**每日活动:**
- 主题日(如周三"探索日"POI奖励翻倍)
- 限时挑战(如"今日行走10公里,额外奖励")

**节日活动:**
- 万圣节: 特殊主题POI、限定建筑
- 圣诞节: 圣诞装饰建筑、圣诞老人NPC
- 春节: 红包系统、春节装饰

**赛季系统(未来):**
- 3个月一个赛季
- 赛季独有成就、称号、皮肤
- 赛季结束排行榜奖励

### 11.3 社区建设

- Discord服务器
- Reddit社区
- 官方Twitter/X
- 玩家UGC分享(领地截图、建造设计)

---

## 12. 成功指标

### 12.1 产品指标

- DAU: 6个月达到10万
- 次日留存 > 40%
- 7日留存 > 20%
- 30日留存 > 10%
- 付费率 > 5%
- ARPU > $2/月

### 12.2 玩家满意度

- App Store评分 > 4.0
- NPS > 30
- 社区活跃度(Discord/Reddit)
- UGC内容产出量

---

## 13. 未来扩展

### 13.1 短期(3-6个月)

- [ ] 更多建筑类型(50+)
- [ ] 制作系统(合成、烹饪)
- [ ] 季节系统(天气影响玩法)
- [ ] 宠物系统(陪伴、辅助)
- [ ] 更多成就和称号

### 13.2 中期(6-12个月)

- [ ] 联盟系统(公会)
- [ ] 联盟领地(共同建设)
- [ ] PvP系统(领地争夺)
- [ ] 世界Boss(区域性事件)
- [ ] AR功能(AR建筑预览)

### 13.3 长期(12个月+)

- [ ] 多人副本(组队探索)
- [ ] 载具系统(自行车、摩托)
- [ ] 自定义建筑外观
- [ ] 赛季竞技
- [ ] IP联动(与其他末日IP合作)

---

## 附录

### A. 参考游戏

- **宝可梦GO:** LBS玩法、POI探索
- **Ingress:** 地理占领机制
- **饥荒:** 生存体征系统
- **我的世界:** 建造系统
- **模拟城市:** 城市规划

### B. 技术文档

- Apple MapKit文档
- Supabase文档
- PostGIS教程
- StoreKit 2最佳实践

### C. 术语表

- **LBS:** Location Based Service
- **POI:** Point of Interest
- **PTT:** Push to Talk
- **Geofencing:** 地理围栏
- **Hopepunk:** 希望朋克(文学/艺术风格)

---

**文档版本历史**

| 版本 | 日期 | 修订内容 |
|------|------|----------|
| 1.0 | 2025-12-24 | 初始版本,完整GDD |

---

**审批记录**

| 角色 | 姓名 | 签名 | 日期 |
|------|------|------|------|
| 游戏总监 | | | |
| 主策划 | | | |
| 技术总监 | | | |
| 美术总监 | | | |
